@model IEnumerable<LanguagesEncyclopedia.Views.Home.License>

@{
    Layout = "~/Views/Shared/_Layout.cshtml";
}
@{
    ViewBag.Title = "IDECreate";
}
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
<script>
    $(document).ready(function () {
        //function will be called on button click having id btnsave
        $("#btnCreate").click(function () {
            var ids=[];
  
            var inputs = document.getElementsByTagName("input");
            for(var i = 0; i < inputs.length; i++) {
                if(inputs[i].type == "checkbox" && inputs[i].checked == true ) {
                    
                    ids.push(inputs[i].id);
                }  
            }
            var pass = 0;
            var nam = document.getElementById('new_IDE').value;
            if (nam == '') { alert("Name is empty"); pass = 1; }
            if (pass == 0) {
                $.ajax(
                {
                    type: "POST", //HTTP POST Method
                    url: "@Url.Action("CreateIDE","Home")", // Controller/View
                    dataType: "json",
                    traditional: true,
                    data: { //Passing data
                        Name: $("#new_IDE").val(), //Reading text box values using Jquery
                        url: $("#new_URL").val(),
                        licensesIDs: ids,
                    },
                    success: function (response) {
                        window.location.href = response.Url;
                    },

                });
            }

            });
        });


</script>

<div id="page-wrapper">
  <div class="container-fluid">
       <div class="row">
           <div class="col-mg-12">
                <h1 class="page-header">Create IDE</h1>
            </div>
       </div>
    </div>
</br>
    Name: <div style="color: red;">*</div> <input type="text"  id="new_IDE"></br>
URL: <input type="text" id="new_URL"></br>
<input type="button" id="btnCreate" value="Create" />
</br></br>

@Html.ActionLink("Return to IDE List", "IDE", "Home") 
</br>
<table id="table" class="table table-bordered">
    <tr class="btn-warning">
        <th>
            @Html.DisplayNameFor(model => model.Name)
        </th>
        <th></th>
    </tr>

    @foreach (var item in Model)
    {
        <tr>
            <td>
                @Html.DisplayFor(modelItem => item.Name)
            </td>
            <td id="@item.LicenseID">
                <script>    
                    var c =document.getElementById('@item.LicenseID');      
                        var checkbox = document.createElement('input');
                        checkbox.type = "checkbox";
                        checkbox.name = "@item.Name";
                        checkbox.value = "@item.Name";
                        checkbox.id = "@item.LicenseID";
                    c.appendChild(checkbox);
                   
                </script>
            </td>
        </tr>
    }

</table>
    </div>
